name: Refresh Feed
on: workflow_dispatch
jobs:
  refresh-feed:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v4 # check out the the ThreatHuntDB repo 
        with:
          persist-credentials: true
          ssh-key: ${{ secrets.DEPLOY_KEY }}
        
      - shell: bash # query Splunk public API to get latest detections 
        run: |
          curl -o ./data/splunk-detections.json https://content.splunkresearch.com/detections 
      
      - uses: EndBug/add-and-commit@v9 # commit and add the new Splunk data file to the repo 
        with:
          message: 'Updated Splunk detection file'
          add: './data/splunk-detections.json --force'
          



